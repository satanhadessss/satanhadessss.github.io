<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ å‡æ³•ç»ƒä¹ </title>
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans SC', Arial, sans-serif; /* å…è´¹å¼€æºå­—ä½“ï¼šæ€æºé»‘ä½“ */
        }

        /* é¡µé¢èƒŒæ™¯å’Œæ•´ä½“å¸ƒå±€ */
        body {
            background-color: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* è®¡ç®—å¼æ˜¾ç¤ºåŒºåŸŸ - ç¦æ­¢æ¢è¡Œ + ç¡®ä¿è¡Œå†…å…ƒç´ å¯¹é½ */
        .calculation-area {
            margin-bottom: 80px;
            text-align: center;
            color: #ffffff; /* ç™½è‰²æ–‡å­— */
            white-space: nowrap; /* æ ¸å¿ƒï¼šé¿å…è®¡ç®—å¼æ¢è¡Œ */
            display: inline-block; /* é…åˆnowrapç”Ÿæ•ˆ */
        }

        /* æ•°å­—æ ·å¼ï¼šé«˜åº¦è°ƒæ•´ä¸º400px */
        .num {
            font-size: 400px;
            line-height: 1; /* æ¶ˆé™¤è¡Œé«˜å¸¦æ¥çš„é¢å¤–é—´è· */
            font-weight: bold;
            vertical-align: middle; /* æ ¸å¿ƒï¼šè®©æ•°å­—ä½œä¸ºå¯¹é½åŸºå‡† */
        }

        /* è¿ç®—ç¬¦å·å’Œç­‰å·æ ·å¼ï¼šé€‚é…400pxæ•°å­—çš„å°ºå¯¸ + ä¸­çº¿å¯¹é½ */
        .operator, .equal {
            font-size: 300px;
            line-height: 1;
            margin: 0 40px;
            font-weight: bold;
            vertical-align: middle; /* æ ¸å¿ƒï¼šä¸æ•°å­—ä¸­çº¿å¯¹é½ */
        }

        /* ç­”æ¡ˆåŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰ */
        .answer {
            font-size: 400px;
            line-height: 1;
            font-weight: bold;
            display: none; /* é»˜è®¤éšè—ç­”æ¡ˆ */
            vertical-align: middle; /* æ ¸å¿ƒï¼šä¸æ•°å­—ä¸­çº¿å¯¹é½ */
        }

        /* æŒ‰é’®ç»„å¸ƒå±€ */
        .btn-group {
            display: flex;
            gap: 100px; /* æŒ‰é’®ä¹‹é—´çš„é—´è· */
            margin-bottom: 20px; /* ç¼©å°é—´è·ï¼Œç»™è®¡æ—¶å™¨ç•™ä½ç½® */
        }

        /* åœ†å½¢æŒ‰é’®é€šç”¨æ ·å¼ï¼šç›´å¾„200px + æ–‡å­—å±…ä¸­ + ç‚¹å‡»åé¦ˆ */
        .action-btn {
            width: 200px;
            height: 200px;
            border-radius: 50%; /* åœ†å½¢ */
            border: none;
            font-size: 90px;
            font-weight: bold;
            cursor: pointer;
            /* æ‰©å±•transitionï¼šåŒ…å«transformå’Œbackground-colorï¼Œè®©åé¦ˆæ›´é¡ºæ»‘ */
            transition: opacity 0.2s ease, transform 0.1s ease, background-color 0.1s ease;
            /* æ ¸å¿ƒï¼šè®©Q/Aå®Œå…¨å±…ä¸­ */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0; /* æ¸…é™¤é»˜è®¤å†…è¾¹è·ï¼Œé¿å…æ–‡å­—åç§» */
            /* ç¦æ­¢æ–‡å­—é€‰ä¸­ï¼Œæå‡ä½“éªŒ */
            user-select: none;
        }

        /* QæŒ‰é’®ï¼šæ©™è‰² */
        .q-btn {
            background-color: #ff7f24;
            color: #ffffff;
        }

        /* AæŒ‰é’®ï¼šè“è‰² */
        .a-btn {
            background-color: #1e90ff;
            color: #ffffff;
        }

        /* æŒ‰é’®hoveræ•ˆæœ */
        .action-btn:hover {
            opacity: 0.9;
        }

        /* æŒ‰é’®ç‚¹å‡»åé¦ˆï¼ˆactiveçŠ¶æ€ï¼‰ */
        .action-btn:active {
            transform: scale(0.95); /* ç‚¹å‡»æ—¶è½»å¾®ç¼©å°ï¼Œæ¨¡æ‹ŸæŒ‰å‹ */
            opacity: 1; /* æ¢å¤ä¸é€æ˜åº¦ */
        }

        /* QæŒ‰é’®ç‚¹å‡»æ—¶é¢œè‰²åŠ æ·± */
        .q-btn:active {
            background-color: #e67018;
        }

        /* AæŒ‰é’®ç‚¹å‡»æ—¶é¢œè‰²åŠ æ·± */
        .a-btn:active {
            background-color: #187bcd;
        }

        /* è®¡æ—¶å™¨æ˜¾ç¤ºæ ·å¼ - æ ¸å¿ƒä¿®æ”¹ï¼šå­—é«˜æ‰©å¤§ä¸€å€ */
        .timer-display {
            color: #ffffff; /* ç™½è‰²æ–‡å­—ï¼Œå’Œè®¡ç®—å¼ç»Ÿä¸€ */
            font-size: 40px; /* åŸ20px â†’ 40pxï¼Œå­—é«˜æ‰©å¤§ä¸€å€ */
            margin-bottom: 50px; /* å’Œè®¿é—®é‡ä¿æŒé—´è· */
            font-weight: bold;
            letter-spacing: 2px; /* å¢åŠ é—´è·ï¼Œæå‡å¯è¯»æ€§ */
        }

        /* è®¿é—®é‡ç»Ÿè®¡åŒºåŸŸ */
        .visit-count {
            color: #999999; /* ç°è‰²å°å­— */
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* èŠ±æœµå›¾æ ‡ */
        .flower-icon {
            font-size: 30px;
        }

        /* å“åº”å¼é€‚é…ï¼šå±å¹•è¿‡å°æ—¶ç¼©å°å°ºå¯¸ï¼ˆé¿å…æº¢å‡ºï¼‰ */
        @media (max-width: 1600px) {
            .num, .answer {
                font-size: 200px;
            }
            .operator, .equal {
                font-size: 150px;
                margin: 0 20px;
                vertical-align: middle; /* å“åº”å¼ä¸‹ä¹Ÿä¿æŒä¸­çº¿å¯¹é½ */
            }
            .action-btn {
                width: 100px;
                height: 100px;
                font-size: 45px;
                /* ä¿æŒæ–‡å­—å±…ä¸­ */
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .btn-group {
                gap: 50px;
            }
            .timer-display {
                font-size: 32px; /* åŸ16px â†’ 32pxï¼Œå“åº”å¼ä¸‹ä¹Ÿæ‰©å¤§ä¸€å€ */
            }
        }
    </style>
    <!-- å¼•å…¥å…è´¹å¼€æºçš„æ€æºé»‘ä½“ï¼ˆç¡®ä¿å­—ä½“å…¼å®¹æ€§ï¼‰ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- è®¡ç®—å¼æ˜¾ç¤ºåŒºåŸŸ -->
    <div class="calculation-area">
        <span class="num num1">0</span>
        <span class="operator">+</span>
        <span class="num num2">0</span>
        <span class="equal">=</span>
        <span class="answer">0</span>
    </div>

    <!-- åŠŸèƒ½æŒ‰é’®ç»„ -->
    <div class="btn-group">
        <button class="action-btn q-btn">Q</button>
        <button class="action-btn a-btn">A</button>
    </div>

    <!-- è®¡æ—¶å™¨æ˜¾ç¤ºåŒºåŸŸ -->
    <div class="timer-display">00:000</div>

    <!-- è®¿é—®é‡ç»Ÿè®¡åŒºåŸŸ -->
    <div class="visit-count">
        <span class="flower-icon">ğŸŒ¸</span>
        <span class="count-num">0</span>
    </div>

    <script>
        // ========== 1. åˆå§‹åŒ–å…ƒç´  ==========
        const num1El = document.querySelector('.num1');
        const num2El = document.querySelector('.num2');
        const operatorEl = document.querySelector('.operator');
        const answerEl = document.querySelector('.answer');
        const qBtn = document.querySelector('.q-btn');
        const aBtn = document.querySelector('.a-btn');
        const countNumEl = document.querySelector('.count-num');
        const timerDisplay = document.querySelector('.timer-display'); // è®¡æ—¶å™¨å…ƒç´ 

        // å½“å‰é¢˜ç›®ä¿¡æ¯
        let currentQuestion = {
            num1: 0,
            num2: 0,
            operator: '+',
            answer: 0
        };

        // ========== 2. è®¡æ—¶ç›¸å…³å˜é‡ ==========
        let timer = null; // è®¡æ—¶å®šæ—¶å™¨ï¼ˆrequestAnimationFrameï¼‰
        let timeoutTimer = null; // 10ç§’è¶…æ—¶å®šæ—¶å™¨
        let startTime = 0; // å¼€å§‹è®¡æ—¶çš„æ—¶é—´æˆ³
        let isTiming = false; // æ˜¯å¦æ­£åœ¨è®¡æ—¶

        // ========== 3. ç”Ÿæˆé¢˜åº“ ==========
        function generateQuestionBank() {
            const bank = [];

            // åŠ æ³•é¢˜ï¼š1~10ä¹‹é—´ä»»é€‰ä¸¤ä¸ªæ•°å­—
            for (let i = 1; i <= 10; i++) {
                for (let j = 1; j <= 10; j++) {
                    bank.push({
                        num1: i,
                        num2: j,
                        operator: '+',
                        answer: i + j
                    });
                }
            }

            // å‡æ³•é¢˜ï¼š20~1ä¹‹é—´ä»»é€‰ä¸¤ä¸ªæ•°å­—ï¼Œæ’é™¤ç­”æ¡ˆä¸ºè´Ÿå€¼çš„æƒ…å†µ
            for (let i = 1; i <= 20; i++) {
                for (let j = 1; j <= 20; j++) {
                    if (i >= j) { // ç¡®ä¿ç­”æ¡ˆéè´Ÿ
                        bank.push({
                            num1: i,
                            num2: j,
                            operator: '-',
                            answer: i - j
                        });
                    }
                }
            }

            return bank;
        }

        // åˆå§‹åŒ–é¢˜åº“
        const questionBank = generateQuestionBank();

        // ========== 4. è®¡æ—¶ç›¸å…³å‡½æ•° ==========
        /**
         * æ ¼å¼åŒ–æ—¶é—´ä¸º 00:000 æ ¼å¼ï¼ˆç§’:æ¯«ç§’ï¼‰
         * @param {number} ms æ€»æ¯«ç§’æ•°
         * @returns {string} æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²
         */
        function formatTime(ms) {
            // è®¡ç®—ç§’æ•°ï¼ˆå–æ•´ï¼‰å’Œæ¯«ç§’æ•°ï¼ˆå–ä½™ï¼‰
            const seconds = Math.floor(ms / 1000).toString().padStart(2, '0');
            const milliseconds = (ms % 1000).toString().padStart(3, '0');
            return `${seconds}:${milliseconds}`;
        }

        /**
         * æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
         */
        function updateTimer() {
            if (!isTiming) return;
            // è®¡ç®—å·²è¿‡æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
            const elapsedTime = Date.now() - startTime;
            // æ ¼å¼åŒ–å¹¶æ›´æ–°æ˜¾ç¤º
            timerDisplay.textContent = formatTime(elapsedTime);
            // ä½¿ç”¨requestAnimationFrameä¿è¯è®¡æ—¶æµç•…ï¼ˆæ¯”setIntervalæ›´ç²¾å‡†ï¼‰
            timer = requestAnimationFrame(updateTimer);
        }

        /**
         * åœæ­¢è®¡æ—¶
         */
        function stopTimer() {
            isTiming = false;
            // æ¸…é™¤è®¡æ—¶å®šæ—¶å™¨
            if (timer) {
                cancelAnimationFrame(timer);
                timer = null;
            }
            // æ¸…é™¤10ç§’è¶…æ—¶å®šæ—¶å™¨
            if (timeoutTimer) {
                clearTimeout(timeoutTimer);
                timeoutTimer = null;
            }
        }

        /**
         * é‡ç½®è®¡æ—¶å™¨ï¼ˆæ¢å¤åˆå§‹æ˜¾ç¤ºï¼‰
         */
        function resetTimer() {
            stopTimer();
            timerDisplay.textContent = '00:000';
        }

        // ========== 5. éšæœºé€‰é¢˜åŠŸèƒ½ ==========
        function randomSelectQuestion() {
            // 1. é‡ç½®è®¡æ—¶å™¨
            resetTimer();
            // 2. éšæœºé€‰é¢˜ï¼Œéšè—ç­”æ¡ˆ
            const randomIndex = Math.floor(Math.random() * questionBank.length);
            currentQuestion = questionBank[randomIndex];
            num1El.textContent = currentQuestion.num1;
            num2El.textContent = currentQuestion.num2;
            operatorEl.textContent = currentQuestion.operator;
            answerEl.style.display = 'none';
            // 3. å¯åŠ¨è®¡æ—¶
            startTime = Date.now();
            isTiming = true;
            updateTimer();
            // 4. è®¾ç½®10ç§’è¶…æ—¶å®šæ—¶å™¨ï¼šè¶…æ—¶è‡ªåŠ¨æ˜¾ç¤ºç­”æ¡ˆ
            timeoutTimer = setTimeout(() => {
                showAnswer(); // ç­‰æ•ˆç‚¹å‡»AæŒ‰é’®
                stopTimer(); // åœæ­¢è®¡æ—¶
            }, 10000); // 10ç§’ = 10000æ¯«ç§’
        }

        // ========== 6. æ˜¾ç¤ºç­”æ¡ˆåŠŸèƒ½ ==========
        function showAnswer() {
            answerEl.textContent = currentQuestion.answer;
            answerEl.style.display = 'inline';
            answerEl.style.verticalAlign = 'middle';
            // åœæ­¢è®¡æ—¶
            stopTimer();
        }

        // ========== 7. è®¿é—®é‡ç»Ÿè®¡ ==========
        function initVisitCount() {
            // ä»localStorageè¯»å–è®¿é—®é‡ï¼Œæ²¡æœ‰åˆ™åˆå§‹åŒ–ä¸º0
            let count = localStorage.getItem('visitCount') || 0;
            count = Number(count) + 1; // æ¯æ¬¡è®¿é—®+1
            localStorage.setItem('visitCount', count); // ä¿å­˜åˆ°æœ¬åœ°
            countNumEl.textContent = count; // æ›´æ–°é¡µé¢æ˜¾ç¤º
        }

        // ========== 8. ç»‘å®šäº‹ä»¶ ==========
        // QæŒ‰é’®ï¼šéšæœºé€‰é¢˜ + å¯åŠ¨è®¡æ—¶
        qBtn.addEventListener('click', randomSelectQuestion);
        // AæŒ‰é’®ï¼šæ˜¾ç¤ºç­”æ¡ˆ + åœæ­¢è®¡æ—¶
        aBtn.addEventListener('click', showAnswer);

        // ========== 9. åˆå§‹åŒ– ==========
        initVisitCount(); // åˆå§‹åŒ–è®¿é—®é‡
        randomSelectQuestion(); // é¡µé¢åŠ è½½æ—¶éšæœºæ˜¾ç¤ºä¸€ä¸ªé¢˜ç›®
    </script>
</body>
</html>
